<html>

    <head>
	
		<title>Scanop</title>
			  
		<link rel="stylesheet" type="text/css" href="index3.css">
		
	</head>
	
	<body>
		
		<div class="btn">
				
		<a href="site_web_scraper (1).html" class="boutonretour">retour</a>
		
	</div>
	
		<h1 class="title1"> <a href="https://scan-op.com/"> ➡Scanop⬅</h1> </a>
		
		<div id="cadre">
		
			<div id="ajout">
			
				<p> Pour pouvoir scrapper les mangas voulu sur ce site, nous sommes parti du principe qu'il fallait une fonction qui stocke les images dans une liste. Pour ce faire nous avons créée la fonction image qui prend en
				argument soup(soup qui permet de recuperer l'entiereté de la page html de l'url) puis la fonction navigate qui recupere le resultat, donc la liste contenant les images du chapitre.
				Dans la fonction Navigate(url) on lui demande que si l'url est différent de 'Fin Du Manga' qu'il fasse une requete d'url et de mettre la dans la variable response avec response = requests.get(url) et de prendre l'html 
				de l'url avec soup = BeautifulSoup(response.text, "html.parser"), puis on crée la variable ListeLiens pour stocker le resultat de la fonction image(soup).Enfin dans image(soup) on crée une liste vide ListeLiens
				puis dans la variable Im on demande de chercher la balise 'img' dans l'html de l'url a l'aide du soup mis en argument.Puis on crée une boucle qui pour chaque element dans Im ajoute a la liste ListeLiens ce qu'il y a 
				apres 'data-src' si la classe de la balise 'img' est égale a 'img-responsive' car c'est sous cette forme que sont stocké les images dans le site.Ensuite on enleve l'espace car dans les url des images du site on trouve des 
				espaces on les enleves avec proto, url = urllib.parse.splittype(var.strip()) cette manipulation enleve les ":" des url du coup on les rajoute ensuite. J'ai fait un petit programe pour expliquer :
				<br>
				
				import urllib.parse
				<br>
				urlpourri = ' http://funquizzes.fun/uploads/manga/vinland-saga/Manga Vinland Saga/170/001.png'
				<br>
				urlpaspourri = urlpourri.strip()
				<br>
				print(urlpaspourri)  # ohhh ya plus l'espace au début
				<br>
				proto,path = urllib.parse.splittype(urlpaspourri)
				<br>
				print(proto)
				<br>
				print(path)  # maintenant ya plus le ":"
				<br>
				path_avec_quote = urllib.parse.quote(path)
				<br>
				print(path_avec_quote)  # on quote la bonne partie
				<br>
				url_avec_quote = proto + ":" + path_avec_quote  # puis on recolle tout
				<br>
				print(url_avec_quote)
 				</p>
		
				<img class ="displayed" src="images/imageop.png">
		
			</div>
			
		</div>
		
		<div id="cadre">
		
			<div id ="ajout">
		
				<p>Enfin pour passer au chapitre suivant nous avons crée la fonction Next qui prend soup (définie précédement) et l'url: </p>
			
				<br>
		
				<img class ="displayed"src="images/Nextop.png"> 
		
				<br>
				
				<p>Dans cette meme fonction nous faisons appelle a deux autres fonctions ici isole(url) qui nous permet
				de récuperer uniquement le numero de chapitre de l'url, on le return en nombre entier pour pouvoir lui ajouter 1 pour passer au chapitre suivant:</p>
				
				<img class ="displayed" src="images/numop.png">
				
				<br>
				
				<p>Puis isole1(url) qui elle nous donne l'url sans le numéro de chapitre: </p><br>
		
				<img class ="displayed" src="images/lienop.png">
				
				<p>Tout est stocké ensuite dans la variable NextUrl puis on transforme tout en string et on crée une boucle qui dit que si l'url nous renvoie une liste d'image vide a l'aide de la fonction image(soup) qui on le rappel 
				nous renvoie la liste des images du chapitre alors on dit que la variable NextUrl= 'Fin Du Manga' en soit que le manga est fini sinon qu'on print tout simplement La valeur de NextUrl (elle prendra la valeur +1 jusqu'a
				ce que NextUrl='Fin Du Manga') Il nous reste plus qu'a importer ce fichier dans la classe faite par le prof et tout fonctionne, N'oubliez pas de changer le chemin!!!</p>
				
			</div>
			
		</div>
		
			 					
  </body>
  
</html>

